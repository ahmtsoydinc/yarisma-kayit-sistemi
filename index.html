<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Yarışma Hayvan Kayıt Sistemi v14.2</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(180deg, #cce5ff, #e0f2ff); color:#002b5c; margin:0; padding:0; }
header { background:#0077cc; color:white; text-align:center; padding:15px 0; font-size:22px; font-weight:bold; box-shadow:0 2px 10px rgba(0,0,0,0.2); }
.container { max-width:950px; margin:20px auto; padding:20px; }
.nav { display:flex; justify-content:center; gap:10px; margin-bottom:20px; flex-wrap:wrap; }
.tab { background:transparent; color:#004c99; border:2px solid #0077cc; border-radius:10px; padding:10px 16px; cursor:pointer; transition:0.3s; }
.tab.active { background:#0077cc; color:white; }
.card { background:rgba(255,255,255,0.7); backdrop-filter:blur(10px); border-radius:16px; box-shadow:0 4px 15px rgba(0,0,0,0.2); padding:20px; margin-bottom:25px; display:none; }
.card.active { display:block; }
input, select { width:100%; padding:10px; border-radius:8px; border:1px solid #b3d7ff; background:rgba(255,255,255,0.8); color:#002b5c; margin-top:5px; }
button { background:#0077cc; border:none; padding:12px 20px; border-radius:10px; color:white; cursor:pointer; font-size:16px; transition:0.3s; }
button:hover { background:#005fa3; }
.success { background:#d1f7d1; color:#004d00; border:1px solid #66cc66; padding:10px; border-radius:8px; margin-top:12px; display:none; text-align:center; }
.loading { background:#e6f3ff; color:#003366; padding:10px; border-radius:8px; margin-bottom:10px; display:none; text-align:center; font-weight:bold; }
.table { width:100%; border-collapse:collapse; }
.table th, .table td { border-bottom:1px solid #cce5ff; padding:10px; text-align:left; }
.table th { background:#e6f3ff; color:#003366; }
.modal { display:none; position:fixed; z-index:10; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.4); backdrop-filter:blur(4px); justify-content:center; align-items:center; }
.modal-content { background:rgba(255,255,255,0.95); padding:30px; border-radius:12px; width:90%; max-width:400px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,0.3); }
.error { color:red; font-size:14px; margin-top:5px; display:none; }
</style>
<script>
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxTEziLmLTCmUpCVSB6QOvLiHPAthCcRqfDfYd-8FPCcpOq9OcB0_AE78wrwZmoZ3gc/exec";
const SHEET_ID = "19qwcNoLZp9Pe1qiDrBo0Ptp_t23SSDpwjuVxybiNggQ";
const ADMIN_PASS = "Ahms02450**";


function openTab(tab){
document.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
document.getElementById(tab).classList.add('active');
document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
}


async function getSheetData(sheet){
try{
const res=await fetch(`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${sheet}`);
const text=await res.text();
return text.split('\n').slice(1).map(r=>r.split(','));
}catch(err){ console.error('Veri alınamadı',err); return []; }
}


async function loadLists(){
const loading=document.getElementById('loadingMsg');
loading.style.display='block';
await new Promise(r=>setTimeout(r,1000));
try{
const dernekSel=document.getElementById('dernekSelect');
const irkSel=document.getElementById('irkSelect');
const cinsSel=document.getElementById('cinsSelect');
const renkSel=document.getElementById('renkSelect');
const dernekler=await getSheetData('Dernekler');
dernekler.forEach(d=>{ if(d[0]) dernekSel.innerHTML+=`<option>${d[0]}</option>`; });
const icr=await getSheetData('IrkCinsRenk');
const irklar=[...new Set(icr.map(r=>r[0]).filter(Boolean))];
irklar.forEach(i=>irkSel.innerHTML+=`<option>${i}</option>`);
irkSel.addEventListener('change',()=>{
cinsSel.innerHTML='<option value="">Cins seçin</option>';
renkSel.innerHTML='<option value="">Renk seçin</option>';
icr.filter(r=>r[0]===irkSel.value).forEach(r=>{ if(r[1]) cinsSel.innerHTML+=`<option>${r[1]}</option>`; });
});
cinsSel.addEventListener('change',()=>{
renkSel.innerHTML='<option value="">Renk seçin</option>';
icr.filter(r=>r[1]===cinsSel.value).forEach(r=>{ if(r[2]) renkSel.innerHTML+=`<option>${r[2]}</option>`; });
});
loading.style.display='none';
}catch(err){ alert('Listeler yüklenemedi: '+err.message); loading.style.display='none'; }
}


async function kaydet(){
const adSoyad=adSoyadInput.value.trim();
const telefon=telefonInput.value.trim();
const dernek=dernekSelect.value.trim();
const tur=turSelect.value.trim();
const tip=tipSelect.value.trim();
const irk=irkSelect.value.trim();
const cins=cinsSelect.value.trim();
</html>
